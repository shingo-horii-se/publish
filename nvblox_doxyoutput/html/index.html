<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nvblox: nvblox @image{inline} html docs/images/nvblox_logo_64.png &quot;nvblox_logo&quot;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="nvblox_logo_32.png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 64px;">
  <td id="projectlogo"><img alt="Logo" src="nvblox_logo_64.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nvblox
   </div>
   <div id="projectbrief">Building signed distance fields for robots from sensor data on Nvidia GPUs.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">nvblox <img src="nvblox_logo_64.png" alt="" class="inline" title="nvblox_logo"/> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>   <a class="anchor" id="md_C__Users_M502228_Downloads_nvblox_public_nvblox_public_README"></a> Signed Distance Functions (SDFs) on NVIDIA GPUs.</p>
<div align="center"><img src="docs/images/3dmatch.gif" alt="" width="600px/" class="inline"/></div><p>A GPU SDF library which offers</p><ul>
<li>GPU accelerated algorithms such as:<ul>
<li>TSDF construction</li>
<li>Occupancy mapping</li>
<li>ESDF construction</li>
<li>Meshing</li>
</ul>
</li>
<li>ROS 2 interface (see <a href="https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_nvblox">isaac_ros_nvblox</a>)</li>
<li>Support for storage of various voxel types, and easily extended to custom voxel types.</li>
</ul>
<p>Above we show reconstruction using data from the <a href="https://3dmatch.cs.princeton.edu/">3DMatch dataset</a>, specifically the <a href="http://sun3d.cs.princeton.edu/">Sun3D</a> <code>mit_76_studyroom</code> scene.</p>
<h1>Table of Contents</h1>
<ul>
<li>nvblox<ul>
<li>Table of Contents</li>
</ul>
</li>
<li>Why nvblox?</li>
<li>How to use nvblox<ul>
<li>Out-of-the-box Reconstruction/ROS 2 Interface</li>
<li>Public Datasets</li>
<li>C++ Interface</li>
</ul>
</li>
<li>Native Installation<ul>
<li>Install dependencies</li>
<li>Build and run tests</li>
<li>Run an example</li>
</ul>
</li>
<li>Docker</li>
<li>Additional instructions for Jetson Xavier<ul>
<li>Open3D on Jetson</li>
</ul>
</li>
<li>Building for multiple GPU architectures</li>
<li>Building redistributable binaries, with static dependencies</li>
<li>License</li>
</ul>
<h1>Why nvblox?</h1>
<p>Do we need another SDF library? That depends on your use case. If you're interested in:</p><ul>
<li><b>Path planning</b>: We provide GPU accelerated, incremental algorithms for calculating the Euclidean Signed Distance Field (ESDF) which is useful for collision checking for robotic path-planning.</li>
<li><b>GPU acceleration</b>: Our previous works <a href="https://github.com/ethz-asl/voxblox">voxblox</a> and <a href="https://github.com/ethz-asl/voxgraph">voxgraph</a> are used for path-planning, however utilize CPU compute only, which limits the speed of these toolboxes, and therefore the resolution of the maps they can build in real-time. nvblox is <em>much</em> faster.</li>
<li><b>Jetson Platform</b>: nvblox is written with the <a href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/">NVIDIA jetson</a> in mind. If you want to run reconstruction on an embedded GPU, you're in the right place.</li>
</ul>
<p>Below we visualize slices through a distance function (ESDF):</p>
<div align="center"><img src="docs/images/nvblox_slice.gif" alt="" width="600px/" class="inline"/></div><h1>How to use nvblox</h1>
<p>How use nvblox depends on what you want to do.</p>
<h2>Out-of-the-box Reconstruction/ROS 2 Interface</h2>
<p>For users who would like to use nvblox in a robotic system or connect easily to a sensor, we suggest using our <a href="https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_nvblox">ROS 2 interface</a>.</p>
<p>The ROS 2 interface includes examples which allow you to:</p><ul>
<li>Build a reconstruction from a realsense camera using nvblox and NVIDIA VSLAM <a href="https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_nvblox/blob/main/docs/tutorial-realsense.md">here</a>.</li>
<li>Navigate a robot in Isaac Sim <a href="https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_nvblox/blob/main/docs/tutorial-isaac-sim.md">here</a>.</li>
<li>Combine 3D reconstruction with image segmentation with <a href="https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_nvblox/blob/main/docs/tutorial-human-reconstruction-realsense.md">realsense data</a> and in <a href="https://github.com/NVIDIA-ISAAC-ROS/isaac_ros_nvblox/blob/main/docs/tutorial-human-reconstruction-isaac-sim.md">simulation</a>.</li>
</ul>
<p>The ROS 2 interface downloads and builds the library contained in this repository during installation, so you don't need to clone and build this repository at all.</p>
<h2>Public Datasets</h2>
<p>If you would like to run nvblox on a public datasets, we include some executables for running reconstructions on <a href="https://3dmatch.cs.princeton.edu/">3DMatch</a>, <a href="https://github.com/facebookresearch/Replica-Dataset">Replica</a>, and <a href="http://redwood-data.org/indoor_lidar_rgbd/index.html">Redwood</a> datasets. Please see our <a class="el" href="md_pages_tutorial_public_datasets.html">tutorial</a> on running these.</p>
<h2>C++ Interface</h2>
<p>If you want to build nvblox into a larger project, without ROS, or you would like to make modifications to nvblox's core reconstruction features, this repository contains the code you need. Our <a class="el" href="md_pages_tutorial_library_interface.html">tutorial</a> provides some brief details of how to interact with the reconstruction in c++.</p>
<h1>Native Installation</h1>
<p>If you want to build natively, please follow these instructions. Instructions for docker are further below.</p>
<h2>Install dependencies</h2>
<p>We depend on:</p><ul>
<li>gtest</li>
<li>glog</li>
<li>gflags</li>
<li>SQLite 3</li>
<li>CUDA 11.0 - 11.8 (others might work but are untested)</li>
<li>Eigen (no need to explicitly install, a recent version is built into the library)</li>
<li>stdgpu (downloaded during compilation) Please run <div class="fragment"><div class="line">sudo apt-get install -y libgoogle-glog-dev libgtest-dev libgflags-dev python3-dev libsqlite3-dev</div>
<div class="line">cd /usr/src/googletest &amp;&amp; sudo cmake . &amp;&amp; sudo cmake --build . --target install</div>
</div><!-- fragment --></li>
</ul>
<h2>Build and run tests</h2>
<div class="fragment"><div class="line">cd nvblox/nvblox</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake .. &amp;&amp; make &amp;&amp; cd tests &amp;&amp; ctest</div>
</div><!-- fragment --><h2>Run an example</h2>
<p>In this example we fuse data from the <a href="https://3dmatch.cs.princeton.edu/">3DMatch dataset</a>. First let's grab the dataset. Here I'm downloading it to my dataset folder <code>~/datasets/3dmatch</code>. </p><div class="fragment"><div class="line">wget http://vision.princeton.edu/projects/2016/3DMatch/downloads/rgbd-datasets/sun3d-mit_76_studyroom-76-1studyroom2.zip -P ~/datasets/3dmatch</div>
<div class="line">unzip ~/datasets/3dmatch/sun3d-mit_76_studyroom-76-1studyroom2.zip -d ~/datasets/3dmatch</div>
</div><!-- fragment --><p> Navigate to and run the <code>fuse_3dmatch</code> binary. From the nvblox base folder run </p><div class="fragment"><div class="line">cd nvblox/build/executables</div>
<div class="line">./fuse_3dmatch ~/datasets/3dmatch/sun3d-mit_76_studyroom-76-1studyroom2/ mesh.ply</div>
</div><!-- fragment --><p> Once it's done we can view the output mesh using the Open3D viewer. Instructions for installing open3d-viewer can be found below. </p><div class="fragment"><div class="line">Open3D mesh.ply</div>
</div><!-- fragment --><p> you should see a mesh of a room: </p><div align="center"><img src="docs/images/reconstruction_in_docker_trim.png" alt="" width="600px/" class="inline"/></div><h1>Docker</h1>
<p>We have several dockerfiles (in the <code>docker</code> subfolder) which layer on top of one another for the following purposes:</p>
<ul>
<li><b>Docker.deps</b></li>
<li>* This installs our dependencies.</li>
<li>* This is used in our CI, where the later steps (building and testing) are taken care of by Jenkins (and not docker).</li>
<li><b>Docker.jetson_deps</b></li>
<li>* Same as above, just on the Jetson (Jetpack 5 and above).</li>
<li><b>Docker.build</b></li>
<li>* Layers on top of Docker.deps.</li>
<li>* This builds our package.</li>
<li>* This is where you get off the layer train if you wanna run stuff (and don't care if it's tested).</li>
<li><b>Docker.test</b></li>
<li>* Layers on top of Docker.build.</li>
<li>* Runs ours tests.</li>
<li>* Useful for checking if things are likely to pass the tests in CI.</li>
</ul>
<p>We rely on nvidia docker. Install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html">NVIDIA Container Toolkit</a> following the instructions on that website.</p>
<p>We use the GPU during build, not only at run time. In the default configuration the GPU is only used at at runtime. One must therefore set the default runtime. Add <code>"default-runtime": "nvidia"</code> to <code>/etc/docker/daemon.json</code> such that it looks like: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;runtimes&quot;: {</div>
<div class="line">        &quot;nvidia&quot;: {</div>
<div class="line">            &quot;path&quot;: &quot;/usr/bin/nvidia-container-runtime&quot;,</div>
<div class="line">            &quot;runtimeArgs&quot;: []</div>
<div class="line">         } </div>
<div class="line">    },</div>
<div class="line">    &quot;default-runtime&quot;: &quot;nvidia&quot; </div>
<div class="line">}</div>
</div><!-- fragment --><p> Restart docker </p><div class="fragment"><div class="line">sudo systemctl restart docker</div>
</div><!-- fragment --><p> Now Let's build Dockerfile.deps docker image. This image install contains our dependencies. </p><div class="fragment"><div class="line">docker build -t nvblox_deps -f docker/Dockerfile.deps .</div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>&zwj;In case you are running this on the Jetson, substitute the dockerfile: <code>docker/Dockerfile.jetson_deps</code> </p>
</blockquote>
<p>Now let's build the Dockerfile.build. This image layers on the last, and actually builds the nvblox library. </p><div class="fragment"><div class="line">docker build -t nvblox -f docker/Dockerfile.build .</div>
</div><!-- fragment --><p> Now let's run the 3DMatch example inside the docker. Note there's some additional complexity in the <code>docker run</code> command such that we can forward X11 to the host (we're going to be view a reconstruction in a GUI). Run the container using: </p><div class="fragment"><div class="line">xhost local:docker</div>
<div class="line">docker run -it --net=host --env=&quot;DISPLAY&quot; -v $HOME/.Xauthority:/root/.Xauthority:rw -v /tmp/.X11-unix:/tmp/.X11-unix:rw nvblox</div>
</div><!-- fragment --><p> Let's download a dataset and run the example (this is largely a repeat of "Run an example" above). </p><div class="fragment"><div class="line">apt-get update</div>
<div class="line">apt-get install unzip</div>
<div class="line">wget http://vision.princeton.edu/projects/2016/3DMatch/downloads/rgbd-datasets/sun3d-mit_76_studyroom-76-1studyroom2.zip -P ~/datasets/3dmatch</div>
<div class="line">unzip ~/datasets/3dmatch/sun3d-mit_76_studyroom-76-1studyroom2.zip -d ~/datasets/3dmatch</div>
<div class="line">cd nvblox/nvblox/build/executables/</div>
<div class="line">./fuse_3dmatch ~/datasets/3dmatch/sun3d-mit_76_studyroom-76-1studyroom2/ mesh.ply</div>
</div><!-- fragment --><p> Now let's visualize. From the same executable folder run: </p><div class="fragment"><div class="line">apt-get install libgl1-mesa-glx libc++1 libc++1-10 libc++abi1-10 libglfw3 libpng16-16</div>
<div class="line">wget https://github.com/isl-org/Open3D/releases/download/v0.13.0/open3d-app-0.13.0-Ubuntu_20.04.deb</div>
<div class="line">dpkg -i open3d-app-0.13.0-Ubuntu_20.04.deb</div>
<div class="line">Open3D mesh.ply</div>
</div><!-- fragment --><p> to visualize on the jetson see below.</p>
<h1>Additional instructions for Jetson Xavier</h1>
<p>These instructions are for a native build on the Jetson Xavier. You can see the instructions above for running in docker.</p>
<p>The instructions for the native build above work, with one exception:</p>
<p>We build using CMake's modern CUDA integration and therefore require a more modern version of CMAKE than (currently) ships with jetpack. Luckily the Cmake developer team provide a means obtaining recent versions of CMake through apt.</p>
<ol type="1">
<li>Obtain a copy of the signing key: <div class="fragment"><div class="line">wget -qO - https://apt.kitware.com/keys/kitware-archive-latest.asc |</div>
<div class="line">    sudo apt-key add -</div>
</div><!-- fragment --></li>
<li>Add the repository to your sources list and update. <div class="fragment"><div class="line">sudo apt-add-repository &#39;deb https://apt.kitware.com/ubuntu/ focal main&#39;</div>
<div class="line">sudo apt-get update</div>
</div><!-- fragment --></li>
<li>Update! <div class="fragment"><div class="line">sudo apt-get install cmake</div>
</div><!-- fragment --></li>
<li>To use the python examples, it is also necessary to make numpy play nice with the Jetson. You can do that by adding the following to your <code>~/.bashrc</code>: <div class="fragment"><div class="line">export OPENBLAS_CORETYPE=ARMV8</div>
</div><!-- fragment --></li>
</ol>
<h2>Open3D on Jetson</h2>
<p>Open3D is available pre-compiled for the jetson (<a href="http://www.open3d.org/docs/release/arm.html">details here</a>). Install via pip: </p><div class="fragment"><div class="line">apt-get install python3-pip</div>
<div class="line">pip3 install open3d==0.16.0</div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>&zwj;If version <code>0.16.0</code> is not available you need to upgrade your pip with <code>pip3 install -U pip</code>. You may additionally need to add the upgraded pip version to your path. </p>
</blockquote>
<p>View the mesh via: </p><div class="fragment"><div class="line">open3d draw mesh.ply</div>
</div><!-- fragment --><h1>Building for multiple GPU architectures</h1>
<p>By default, the library builds ONLY for the compute capability (CC) of the machine it's being built on. To build binaries that can be used across multiple machines (i.e., pre-built binaries for CI, for example), you can use the <code>BUILD_FOR_ALL_ARCHS</code> flag and set it to true. Example: </p><div class="fragment"><div class="line">cmake .. -DBUILD_FOR_ALL_ARCHS=True -DCMAKE_INSTALL_PREFIX=../install/ &amp;&amp; make -j8 &amp;&amp; make install</div>
</div><!-- fragment --><h1>Building redistributable binaries, with static dependencies</h1>
<p>If you want to include nvblox in another CMake project, simply <code>find_package(nvblox)</code> should bring in the correct libraries and headers. However, if you want to include it in a different build system such as Bazel, you can see the instructions here.</p>
<h1>License</h1>
<p>This code is under an [open-source license](LICENSE) (Apache 2.0). :) </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
